# FIELD.DAT


## 修改：FDFIELD.DAT

1. 十七章心眼之書變領悟之書（解決領悟之書不足的問題）：

```
60 00 00 5C
-- -- -- 5B
```

2. 二十六章神器寶箱可全拿，不會開一個就全開：

```
02 3A 00 02 3A 00 02 3A 00 02 3A 00 02 3A
00 1D -- 00 2B -- 00 33 -- 00 3D -- 00 47
```


## 修改：FDFIELD.DAT地圖資料

1. 檔頭=連續6個4Ch
2. 各地圖資料位置：每地圖3個4 byte整數，共12 byte
    1. 地圖構成資料位置
    2. 地圖控制與寶箱資料位置
    3. 人物出場位置資料位置

地圖構成資料：

1. 地圖寬度：2 byte整數
2. 地圖高度：2 byte整數
3. 地圖資料：先水平後垂直，每單位2個2 byte整數
    1. 地形編號（由FDSHAP.DAT的地形控制資料可得知是否有寶箱）
    2. 觸發的事件編號（#1以上）或寶箱編號（#0以上）

地圖控制與寶箱資料：

1. 地圖編號：1 byte
2. 己方最多可出場人數：1 byte
3. 敵友出場人物總數：1 byte
4. 回合事件資訊：每組3 byte，共16組，FF FF 00表沒有
    1. 所在回合：1 byte
    2. 事件編號：2 byte
5. 保留：每組2 byte，共16組，一律FF 00
6. 寶箱資料：每組3 byte，共16組（必須地圖構成資料裡有觸發才有用）
    1. 型態：1 byte，00表物品，01表金錢
    2. 內容：2 byte，物品編號／金錢數目
7. 出場人物資訊：每位26 byte，數量=敵友出場人物總數
    1. 陣營：1 byte，00=敵方，01=友方，02=己方
    1. 肖像編號：1 byte
    1. 種族編號：1 byte
    1. 職業編號：1 byte
    1. 等級：1 byte
    1. 物品編號：每個1 byte，共8個，最前兩個固定為裝備的武器和防具，FF表沒有
    1. 法術編號：每個1 byte，共8個
    1. 出場所在回合：1 byte
    1. 死亡時掉落物品：4 byte
        1. 型態：1 byte，00表物品，01表金錢
        1. 內容：3 byte，物品編號／金錢數目

人物出場位置資料：

1. 人物總數：2 byte整數（己方最多可出場人數+敵友出場人物總數）
2. 出場位置資訊：每組3個2 byte整數
    1. X座標
    1. Y座標
    1. 肖像編號：00表己方人物

修改：FDSHAP.DAT

地形控制資料：`2422Eh`開始，每個地形4 byte，按地形編號排列

```
  寶箱資訊：1 byte
    20h = 1表寶箱
    40h = 1表隱藏物品
  移動資訊：1 byte
    0 = 正常狀態（AP+05,DP+00）
    1 = 不可移動（AP+00,DP+00）
    2 = 騎士移動力減低（AP-05,DP+10）
    3 = 所有人物移動力減低（AP-05,DP+10）
    4 = 所有人物移動力減低（AP-05,DP-05）
    5 = 不可移動（AP+00,DP+00）
  戰鬥背景編號：2 byte
```